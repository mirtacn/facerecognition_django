<!-- templates/admin/sidebar_admin.html -->
{% load static %}
{% load i18n %}

<div class="sidebar-content p-4 flex-grow-1 d-flex flex-column">
    <!-- Logo -->
    <div class="text-center mb-4">
        <img src="{% static 'img/logoMSECTnih.png' %}" alt="Logo MSECT" width="170" class="mb-3">
        <h6 class="fw-bold text-white mb-1">{% trans "Attendance & Credit Management System" %}</h6>
        <p class="small text-light opacity-75">{% trans "Admin Dashboard" %}</p>
    </div>

    <!-- Navigation Menu -->
    <ul class="nav nav-pills flex-column mb-auto flex-grow-1">
        <!-- Dashboard -->
        <li class="nav-item mb-2">
            <a href="{% url 'admin_dashboard' %}" 
               class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'admin_dashboard' %}active bg-primary{% else %}hover-bg{% endif %}">
                <i class="bi bi-speedometer2 me-3 fs-6"></i>
                <span class="fw-medium">{% trans "Dashboard" %}</span>
            </a>
        </li>

        <!-- Kamera Presensi Mahasiswa -->
        <li class="nav-item mb-2">
            <a href="{% url 'kamera_presensi_mhs' %}" 
               class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'kamera_presensi_mhs' %}active bg-primary{% else %}hover-bg{% endif %}">
                <i class="bi bi-camera-video me-3 fs-6"></i>
                <span class="fw-medium">{% trans "Student Attendance Camera" %}</span>
            </a>
        </li>

        <!-- Monitor Durasi Presensi -->
        <li class="nav-item mb-2">
            <a href="{% url 'monitor_durasi' %}" 
               class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'monitor_durasi' %}active bg-primary{% else %}hover-bg{% endif %}">
                <i class="bi bi-clock me-3 fs-6"></i>
                <span class="fw-medium">{% trans "Attendance Duration Monitor" %}</span>
            </a>
        </li>

        <!-- Management Data - Dropdown -->
        <li class="nav-item mb-2">
            <a class="nav-link text-white d-flex align-items-center py-2 px-3 rounded hover-bg" 
               data-bs-toggle="collapse" href="#managementDataCollapse" role="button" 
               aria-expanded="{% if 'management_data' in request.resolver_match.url_name or 'approval_pendaftaran' in request.resolver_match.url_name or 'data_mahasiswa' in request.resolver_match.url_name or 'master_data_wajah' in request.resolver_match.url_name or 'data_sks' in request.resolver_match.url_name %}true{% else %}false{% endif %}" 
               aria-controls="managementDataCollapse">
                <i class="bi bi-database me-3 fs-6"></i>
                <span class="fw-medium">{% trans "Data Management" %}</span>
                <i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <div class="collapse {% if 'management_data' in request.resolver_match.url_name or 'approval_pendaftaran' in request.resolver_match.url_name or 'data_mahasiswa' in request.resolver_match.url_name or 'master_data_wajah' in request.resolver_match.url_name or 'data_sks' in request.resolver_match.url_name %}show{% endif %}" 
                 id="managementDataCollapse">
                <ul class="nav nav-pills flex-column ms-4 mt-2">
                    <li class="nav-item mb-1">
                        <a href="{% url 'approval_pendaftaran' %}" 
                           class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'approval_pendaftaran' %}active bg-primary{% else %}hover-bg{% endif %}">
                            <i class="bi bi-check-circle me-2 fs-6"></i>
                            <span>{% trans "Account Registration Approval" %}</span>
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a href="{% url 'data_mahasiswa' %}" 
                           class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'data_mahasiswa' %}active bg-primary{% else %}hover-bg{% endif %}">
                            <i class="bi bi-people me-2 fs-6"></i>
                            <span>{% trans "Student Data" %}</span>
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a href="{% url 'master_data_wajah' %}" 
                           class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'master_data_wajah' %}active bg-primary{% else %}hover-bg{% endif %}">
                            <i class="bi bi-camera me-2 fs-6"></i>
                            <span>{% trans "Student Face Master Data" %}</span>
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a href="{% url 'data_sks' %}" 
                           class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'data_sks' %}active bg-primary{% else %}hover-bg{% endif %}">
                            <i class="bi bi-journal-bookmark me-2 fs-6"></i>
                            <span>{% trans "Credit Activity Data" %}</span>
                        </a>
                    </li>
                </ul>
            </div>
        </li>

        <!-- Monitoring Presensi - Dropdown -->
        <li class="nav-item mb-2">
            <a class="nav-link text-white d-flex align-items-center py-2 px-3 rounded hover-bg" 
               data-bs-toggle="collapse" href="#monitoringPresensiCollapse" role="button" 
               aria-expanded="{% if 'monitoring_presensi' in request.resolver_match.url_name or 'rekap_presensi' in request.resolver_match.url_name %}true{% else %}false{% endif %}" 
               aria-controls="monitoringPresensiCollapse">
                <i class="bi bi-eye me-3 fs-6"></i>
                <span class="fw-medium">{% trans "Attendance Monitoring" %}</span>
                <i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <div class="collapse {% if 'monitoring_presensi' in request.resolver_match.url_name or 'status_pemenuhan_sks' in request.resolver_match.url_name %}show{% endif %}" 
                 id="monitoringPresensiCollapse">
                <ul class="nav nav-pills flex-column ms-4 mt-2">
                    <li class="nav-item mb-1">
                        <a href="{% url 'status_pemenuhan_sks' %}" 
                           class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'monitoring_presensi' %}active bg-primary{% else %}hover-bg{% endif %}">
                            <i class="bi bi-eye me-2 fs-6"></i>
                            <span>{% trans "Credit Requirement Status" %}</span>
                        </a>
                    </li>
                    <li class="nav-item mb-1">
                        <a href="{% url 'rekap_presensi' %}" 
                           class="nav-link text-white d-flex align-items-center py-2 px-3 rounded {% if request.resolver_match.url_name == 'rekap_presensi' %}active bg-primary{% else %}hover-bg{% endif %}">
                            <i class="bi bi-file-earmark-text me-2 fs-6"></i>
                            <span>{% trans "Attendance Summary" %}</span>
                        </a>
                    </li>
                </ul>
            </div>
        </li>
    </ul>

    <!-- Logout Button -->
    <div class="mt-auto pt-4 border-top border-light border-opacity-25">
        <a href="{% url 'logout' %}" 
           class="nav-link text-white d-flex align-items-center py-2 px-3 rounded hover-bg text-danger">
            <i class="bi bi-box-arrow-right me-3 fs-6"></i>
            <span class="fw-medium">{% trans "Logout" %}</span>
        </a>
    </div>
</div>

<style>
    .sidebar-content {
        height: 100%;
        overflow-y: auto;
    }

    .hover-bg:hover {
        background-color: rgba(255, 255, 255, 0.1) !important;
    }

    .nav-link.active {
        background-color: #2563eb !important;
    }

    /* Style untuk submenu */
    .nav-pills .nav-link {
        border-radius: 0.5rem;
        transition: all 0.2s;
    }

    .nav-pills .nav-link i {
        font-size: 1rem;
    }

    /* Icon chevron rotation */
    .nav-link[aria-expanded="true"] .bi-chevron-down {
        transform: rotate(180deg);
        transition: transform 0.3s;
    }

    .nav-link[aria-expanded="false"] .bi-chevron-down {
        transform: rotate(0deg);
        transition: transform 0.3s;
    }

    /* Submenu indent */
    .nav-pills .nav-pills {
        padding-left: 1rem;
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
        .sidebar-container {
            transform: translateX(-100%);
        }
        
        .sidebar-show {
            transform: translateX(0);
        }
    }
</style>